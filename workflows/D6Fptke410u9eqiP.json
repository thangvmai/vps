{
  "active": false,
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out4": {
      "main": [
        [
          {
            "node": "Edit Fields4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields4": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Edit Fields5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain2",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Content2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields5": {
      "main": [
        [
          {
            "node": "Aggregate6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate6": {
      "main": [
        [
          {
            "node": "Content2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request5": {
      "main": [
        [
          {
            "node": "Split Out5",
            "type": "main",
            "index": 0
          },
          {
            "node": "Split Out4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "C·∫≠p nh·∫≠t n·ªôi dung2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung2": {
      "main": [
        [
          {
            "node": "Code8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "Code6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code6": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "HTTP Request5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "C·∫≠p nh·∫≠t n·ªôi dung2": {
      "main": [
        [
          {
            "node": "l·∫•y n·ªôi dung2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Content2": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out5": {
      "main": [
        [
          {
            "node": "check image2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check image2": {
      "main": [
        [
          {
            "node": "Code7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code7": {
      "main": [
        [
          {
            "node": "Aggregate7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate7": {
      "main": [
        [
          {
            "node": "·∫¢nh2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "·∫¢nh2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "·∫¢nh2": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code8": {
      "main": [
        [
          {
            "node": "Aggregate8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate8": {
      "main": [
        [
          {
            "node": "Zalo Send Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "·∫¢nh2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "x√≥a logo": {
      "main": [
        [
          {
            "node": "ki·ªÉm tra tr·∫°ng th√°i",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ki·ªÉm tra tr·∫°ng th√°i": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Get image",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ki·ªÉm tra tr·∫°ng th√°i",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get image": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Aggregate1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "x√≥a logo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate1": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung7": {
      "main": [
        [
          {
            "node": "If9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t7": {
      "main": [
        [
          {
            "node": "c·∫≠p nh·∫≠t duy·ªát b√†i10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "c·∫≠p nh·∫≠t duy·ªát b√†i10": {
      "main": [
        [
          {
            "node": "Zalo Send Message6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If9": {
      "main": [
        [
          {
            "node": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ƒêƒÉng L√™n Facebook8": {
      "main": [
        [
          {
            "node": "Facebook Graph API8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung19": {
      "main": [
        [
          {
            "node": "If22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t19": {
      "main": [
        [
          {
            "node": "Code15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API8": {
      "main": [
        [
          {
            "node": "Code14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code14": {
      "main": [
        [
          {
            "node": "c·∫≠p nh·∫≠t tr·∫°ng th√°i8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "c·∫≠p nh·∫≠t tr·∫°ng th√°i8": {
      "main": [
        [
          {
            "node": "Zalo Send Message3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If22": {
      "main": [
        [
          {
            "node": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "l·∫•y n·ªôi dung19",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "l·∫•y n·ªôi dung21",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "l·∫•y n·ªôi dung23",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "l·∫•y n·ªôi dung7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "l·∫•y n·ªôi dung25",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code15": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ƒêƒÉng L√™n Facebook9": {
      "main": [
        [
          {
            "node": "Facebook Graph API9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung21": {
      "main": [
        [
          {
            "node": "If24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t21": {
      "main": [
        [
          {
            "node": "Code17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API9": {
      "main": [
        [
          {
            "node": "Code16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code16": {
      "main": [
        [
          {
            "node": "c·∫≠p nh·∫≠t tr·∫°ng th√°i9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "c·∫≠p nh·∫≠t tr·∫°ng th√°i9": {
      "main": [
        [
          {
            "node": "Zalo Send Message4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If24": {
      "main": [
        [
          {
            "node": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code17": {
      "main": [
        [
          {
            "node": "Aggregate10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ƒêƒÉng L√™n Facebook10": {
      "main": [
        [
          {
            "node": "Facebook Graph API10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung23": {
      "main": [
        [
          {
            "node": "If26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t23": {
      "main": [
        [
          {
            "node": "Code19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API10": {
      "main": [
        [
          {
            "node": "Code18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code18": {
      "main": [
        [
          {
            "node": "c·∫≠p nh·∫≠t tr·∫°ng th√°i10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "c·∫≠p nh·∫≠t tr·∫°ng th√°i10": {
      "main": [
        [
          {
            "node": "Zalo Send Message5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If26": {
      "main": [
        [
          {
            "node": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code19": {
      "main": [
        [
          {
            "node": "Aggregate11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "T√°ch link ·∫£nh th√†nh item": {
      "main": [
        [
          {
            "node": "ƒêƒÉng L√™n Facebook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ƒêƒÉng L√™n Facebook1": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Aggregate9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate9": {
      "main": [
        [
          {
            "node": "ƒêƒÉng L√™n Facebook2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ƒêƒÉng L√™n Facebook2": {
      "main": [
        [
          {
            "node": "Facebook Graph API11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "l·∫•y n·ªôi dung25": {
      "main": [
        [
          {
            "node": "If28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25": {
      "main": [
        [
          {
            "node": "T√°ch link ·∫£nh th√†nh item",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If28": {
      "main": [
        [
          {
            "node": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Facebook Graph API11": {
      "main": [
        [
          {
            "node": "Code20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code20": {
      "main": [
        [
          {
            "node": "c·∫≠p nh·∫≠t tr·∫°ng th√°i11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "c·∫≠p nh·∫≠t tr·∫°ng th√°i11": {
      "main": [
        [
          {
            "node": "Zalo Send Message7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "ƒêƒÉng L√™n Facebook8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate10": {
      "main": [
        [
          {
            "node": "ƒêƒÉng L√™n Facebook9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate11": {
      "main": [
        [
          {
            "node": "ƒêƒÉng L√™n Facebook10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zalo Message Trigger": {
      "main": [
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-08-09T09:47:25.261Z",
  "id": "D6Fptke410u9eqiP",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Post_multi_page",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -2144,
        224
      ],
      "id": "e9ec9f3e-f1ea-4dc3-b0ba-58ad122cb7b0",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "fieldToSplitOut": "results",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -624,
        -208
      ],
      "id": "510eafd1-6b75-4190-8d15-2cf864600baa",
      "name": "Split Out4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e2805947-23bb-42bc-8758-4a78e372b3d7",
              "name": "title",
              "value": "={{ $json.title }}",
              "type": "string"
            },
            {
              "id": "27c45a5e-9a40-497b-a4c3-8ff433669683",
              "name": "url",
              "value": "={{ $json.url }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -416,
        -208
      ],
      "id": "8c5d7b25-7b14-4f5a-a1bb-27be05cee929",
      "name": "Edit Fields4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -176,
        -208
      ],
      "id": "a06b3380-9740-4313-88f3-43f23db9981d",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/extract",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "urls",
              "value": "={{ $json.url }}"
            },
            {
              "name": "include_images",
              "value": "false"
            },
            {
              "name": "extract_depth",
              "value": "basic"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        32,
        -112
      ],
      "id": "445109db-5285-4bff-a1bc-22be4947c95c",
      "name": "HTTP Request4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=- Ti·ªÉu ƒë·ªÅ: {{ $('Loop Over Items2').item.json.title }}\n- raw content: {{ $json.results[0].raw_content }}\n- URL: {{ $('Loop Over Items2').item.json.url }}",
        "messages": {
          "messageValues": [
            {
              "message": "- B·∫°n l√† m·ªôt nh√¢n vi√™n sale c·ªßa m·ªôt spa, chuy√™n ph·ª• tr√°ch vi·∫øt b√†i qu·∫£ng c√°o d·ªãch v·ª• v√† m·ªπ ph·∫©m ƒëƒÉng l√™n facebook\n- ƒë·∫ßu v√†o: ti√™u ƒë·ªÅ, n·ªôi dung th√¥, URL\n- ƒê·ªçc k·ªπ ti√™u ƒë·ªÅ v√† n·ªôi dung th√¥ ƒë∆∞·ª£c cung c·∫•p, t·∫°o m·ªôt t√≥m t·∫Øt ng·∫Øn g·ªçn, n√™u r√µ ƒëi·ªÉm ch√≠nh, nh·ªØng th√¥ng tin quan tr·ªçng v√† b·∫•t c·ª© th√¥ng tin n√†o li√™n quan ƒë·∫øn d·ªãch v·ª• v√† m·ªπ ph·∫©m chƒÉm s√≥c da.\n- ƒê·∫£m b·∫£o t√≥m t·∫Øt r√µ r√†ng, th√¥ng tin ph√π h·ª£p v·ªõi ƒë·ªôc gi·∫£ ƒëang t√¨m ki·∫øm th√¥ng tin nhanh v·ªÅ d·ªãch v·ª• bao g·ªìm nh·ªØng l·ª£i √≠ch d·ªãch v·ª• mang l·∫°i v√† nh·ªØng ƒë·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t c·ªßa d·ªãch v·ª• v√† s·∫£n ph·∫©m ƒë√≥.\n- cung c·∫•p t√≥m t·∫Øt theo ƒë·ªãnh d·∫°ng c√≥ c·∫•u tr√∫c, s·ª≠ d·ª•ng d·∫•u ƒë·∫ßu d√≤ng ho·∫∑c ƒëo·∫°n vƒÉn ng·∫Øn ƒë·ªÉ r√µ r√†ng.\n- ƒë·ªãnh d·∫°ng ƒë·∫ßu ra:\n+ m·ªôt t√≥m t·∫Øt r√µ r√†ng v√† ng·∫Øn g·ªçn v·ªÅ th√¥ng tin s·∫£n ph·∫©m\n+ bao g·ªìm tham chi·∫øu ƒë·∫øn ti√™u ƒë·ªÅ v√† url ƒë·ªÉ c√≥ ng·ªØ c·∫£nh\n+ ƒë·ªãnh d·∫°ng plain text kh√¥ng ch·ª©a c√°c k√Ω t·ª± markdown nh∆∞ *, ** ho·∫∑c #.v.v.. "
            }
          ]
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.6,
      "position": [
        272,
        -112
      ],
      "id": "db6da115-f730-4602-b527-27257a095eef",
      "name": "Basic LLM Chain2"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        384,
        80
      ],
      "id": "31994391-e7b7-4d77-b300-b9a9ff72a83a",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "jETUIHbao5VpmN6h",
          "name": "Sora"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b6ab2317-a5cc-4e84-b8b5-0f3ab43308e9",
              "name": "all",
              "value": "={{ $itemindex+1 }}. {{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        32,
        -288
      ],
      "id": "e363a8ce-58d6-404d-81ca-7c4ace48208f",
      "name": "Edit Fields5"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "all"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        272,
        -288
      ],
      "id": "86f680c3-c29a-4be1-850d-c42a28abf629",
      "name": "Aggregate6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/search",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"query\": \"{{ $json['ch·ªß ƒë·ªÅ'] }}\",\n  \"topic\": \"general\",\n  \"search_depth\": \"basic\",\n  \"chunks_per_source\": 3,\n  \"max_results\": 5,\n  \"time_range\": null,\n  \"days\": 7,\n  \"include_answer\": false,\n  \"include_raw_content\": false,\n  \"include_images\": true,\n  \"include_image_descriptions\": false,\n  \"include_domains\": [],\n  \"exclude_domains\": []\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1072,
        224
      ],
      "id": "1c2b7873-bf7d-47c6-819a-bf3cc0c653b1",
      "name": "HTTP Request5"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        1248,
        -32
      ],
      "id": "be3514a9-acba-4b0a-8cc5-ae0ff563b28d",
      "name": "Merge2"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "id",
              "lookupValue": "={{ $json['id'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1872,
        -32
      ],
      "id": "0af2d1f3-78d2-4294-861c-e8f6b1078739",
      "name": "l·∫•y n·ªôi dung2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            },
            {
              "id": "6ad294f8-0741-483e-b4de-118dd6617af5",
              "leftValue": "={{ $json[\"ng√†y t·∫°o\"].split('/').reverse().join('-') }}",
              "rightValue": "={{ new Date().toISOString().slice(0, 10) }}",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1712,
        224
      ],
      "id": "44772cd6-ad40-4a59-bbb0-915a05f22f17",
      "name": "If4"
    },
    {
      "parameters": {
        "jsCode": "let items = $input.all();\nlet minItem = items[0];\n\nfor (const item of items) {\n  if (item.json.id < minItem.json.id) {\n    minItem = item;\n  }\n}\n\nreturn [minItem];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1504,
        224
      ],
      "id": "5d8f7566-9aa4-464c-badb-1e036bb86dc1",
      "name": "Code6"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0f1aad73-2557-4470-9375-a9f3f3b46a09",
              "leftValue": "={{ $json['N·ªôi dung'] }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1280,
        224
      ],
      "id": "ef06fe23-fd11-45b6-a465-becb2e8de81a",
      "name": "If5"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Code6').item.json.id }}",
            "·∫¢nh": "={{ $json.images[0][0].url }}\n{{ $json.images[1][0].url }}\n{{ $json.images[2][0].url }}",
            "N·ªôi dung": "={{ $('Content2').item.json.output }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        1664,
        -32
      ],
      "id": "d0ff9909-3da5-46c8-8bba-bdf7e7bb4eac",
      "name": "C·∫≠p nh·∫≠t n·ªôi dung2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.all }}",
        "options": {
          "systemMessage": "=## NHI·ªÜM V·ª§:\nVi·∫øt b√†i qu·∫£ng c√°o Facebook s√°ng t·∫°o cho d·ªãch v·ª• v√† s·∫£n ph·∫©m chƒÉm s√≥c da theo ch·ªß ƒë·ªÅ {{ $('Code6').item.json['ch·ªß ƒë·ªÅ'] }}.\n\n## B∆Ø·ªöC 1: T·ªîNG H·ª¢P TH√îNG TIN\nT·ª´ 5 ƒëo·∫°n t√≥m t·∫Øt c·ªßa c√°c b√†i vi·∫øt Google li√™n quan ƒë·∫øn ch·ªß ƒë·ªÅ chƒÉm s√≥c da {{ $('Code6').item.json['ch·ªß ƒë·ªÅ'] }}, h√£y:\n\nR√∫t ra nh·ªØng ƒëi·ªÉm n·ªïi b·∫≠t v√† thuy·∫øt ph·ª•c nh·∫•t v·ªÅ:\n\nL·ª£i √≠ch n·ªïi b·∫≠t c·ªßa li·ªáu tr√¨nh/skincare\n\nC·∫£m nh·∫≠n th·ª±c t·∫ø c·ªßa kh√°ch h√†ng (review, feedback)\n\nTr·∫£i nghi·ªám th∆∞ gi√£n, kh√¥ng gian spa, c√¥ng ngh·ªá s·ª≠ d·ª•ng\n\nHi·ªáu qu·∫£ c·∫£i thi·ªán da (tr∆∞·ªõc/sau), th·ªùi gian ph·ª•c h·ªìi\n\nTh√†nh ph·∫ßn t·ª± nhi√™n, d∆∞·ª£c m·ªπ ph·∫©m cao c·∫•p n·∫øu c√≥\n\nT·∫≠p trung v√†o c√°c y·∫øu t·ªë t·∫°o c·∫£m x√∫c & k√≠ch th√≠ch h√†nh ƒë·ªông:\n\nTh∆∞ gi√£n ‚Äì l√†m ƒë·∫πp ‚Äì t√°i t·∫°o nƒÉng l∆∞·ª£ng\n\nT·ª± th∆∞·ªüng ‚Äì chƒÉm s√≥c b·∫£n th√¢n ‚Äì n√¢ng t·∫ßm v·∫ª ƒë·∫πp\n\nXu h∆∞·ªõng l√†m ƒë·∫πp l√†nh t√≠nh ‚Äì t·ª± nhi√™n ‚Äì kh√¥ng x√¢m l·∫•n\n\n## B∆Ø·ªöC 2: VI·∫æT B√ÄI QU·∫¢NG C√ÅO FACEBOOK\nD·ª±a tr√™n n·ªôi dung t·ªïng h·ª£p t·ª´ b∆∞·ªõc 1, h√£y vi·∫øt m·ªôt b√†i qu·∫£ng c√°o h·∫•p d·∫´n v·ªõi:\n\n## B·ªë c·ª•c r√µ r√†ng:\nM·ªü ƒë·∫ßu g√¢y ch√∫ √Ω\nG·ª£i c·∫£m x√∫c, nh·∫•n m·∫°nh v·∫•n ƒë·ªÅ m√† kh√°ch h√†ng ƒëang g·∫∑p ph·∫£i (da x·ªân m√†u, m·ª•n, stress‚Ä¶), ho·∫∑c ƒë∆∞a ra l·ªùi m·ªùi h·∫•p d·∫´n.\n\nN·ªôi dung ch√≠nh\nN√™u b·∫≠t gi√° tr·ªã v√† tr·∫£i nghi·ªám ƒë·ªôc quy·ªÅn c·ªßa d·ªãch v·ª•/s·∫£n ph·∫©m:\n\nT·∫°i sao n√™n ch·ªçn spa n√†y?\n\nLi·ªáu tr√¨nh c√≥ g√¨ ƒë·∫∑c bi·ªát?\n\nFeedback kh√°ch h√†ng?\n\nTr∆∞·ªõc/sau r√µ r·ªát?\n\nK·∫øt th√∫c b·∫±ng l·ªùi k√™u g·ªçi h√†nh ƒë·ªông m·∫°nh m·∫Ω\nV√≠ d·ª•:\nüëâ ‚Äúƒê·∫∑t l·ªãch ngay ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i 50%!‚Äù\nüëâ ‚ÄúInbox ngay ‚Äì s·ªë l∆∞·ª£ng su·∫•t ∆∞u ƒë√£i c√≥ h·∫°n!‚Äù\nüëâ ‚ÄúT·ª± tin v·ªõi l√†n da ƒë·∫πp ‚Äì ch·ªâ sau 1 l·∫ßn tr·∫£i nghi·ªám!‚Äù\n\nüí° PHONG C√ÅCH:\nG·∫ßn g≈©i, ng√¥n ng·ªØ t·ª± nhi√™n nh∆∞ ƒëang tr√≤ chuy·ªán\n\nCh√®n emoji ƒë·ªÉ tƒÉng t√≠nh thu h√∫t (v√≠ d·ª•: üíÜ‚Äç‚ôÄÔ∏è‚ú®üåøüî•üíñ)\n\nNg·∫Øt d√≤ng h·ª£p l√Ω, m·ªói ƒëo·∫°n ng·∫Øn 1‚Äì2 c√¢u\n\nTr√°nh vi·∫øt qu√° d√†i, ∆∞u ti√™n d·ªÖ hi·ªÉu v√† cu·ªën h√∫t\n\nƒêo·∫°n li√™n h·ªá b·∫Øt bu·ªôc (ch√®n v√†o cu·ªëi b√†i vi·∫øt):\n- s·ªë ƒëi·ªán tho·∫°i: 0327191802.\n- ƒë·ªãa ch·ªâ: 80 VƒÉn Cao, Tp Bu√¥n Ma Thu·ªôt, Daklak.\n- Tiktok: Calla de beauty.\n\nTh√™m t·ªëi ƒëa 3 hashtag ph√π h·ª£p cu·ªëi b√†i.\n\n- output:\n\nM·ªôt b√†i ƒëƒÉng Facebook ho√†n ch·ªânh c√≥ b·ªë c·ª•c r√µ r√†ng (t·ªëi ƒëa 200 t·ª´).\n\nƒë·ªãnh d·∫°ng plain text kh√¥ng ch·ª©a c√°c k√Ω t·ª± markdown nh∆∞ *, ** ho·∫∑c #.v.v.."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        624,
        -288
      ],
      "id": "c86c5591-f834-402f-9026-ecf792a0c803",
      "name": "Content2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "images",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -848,
        448
      ],
      "id": "acba74af-19dc-4499-b19d-822b44d3742c",
      "name": "Split Out5"
    },
    {
      "parameters": {
        "url": "={{ $json.images }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -640,
        448
      ],
      "id": "5651d7ef-97bc-4919-b6e3-8ebd1700aab4",
      "name": "check image2",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// L·∫•y to√†n b·ªô URL ·∫£nh h·ª£p l·ªá\nconst validImageUrls = items\n  .map(item => item.json?.images)\n  .filter(url => typeof url === 'string' && url.startsWith('http'));\n\n// T·∫°o danh s√°ch d·∫°ng chu·ªói\nconst imageListString = validImageUrls\n  .map((url, i) => `${i + 1}. ${url}`)\n  .join('\\n');\n\n// G·∫Øn l·∫°i m·ªói item c≈© v·ªõi th√™m context imageListString\nreturn items.map(item => {\n  return {\n    json: {\n      ...item.json,\n      imageListString,\n      allValidImages: validImageUrls\n    }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -384,
        448
      ],
      "id": "6a48ab9f-6843-45fd-b38f-efba4d372acd",
      "name": "Code7"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "allValidImages"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -208,
        448
      ],
      "id": "ae216f0d-cc6e-4b9d-9811-7a23752e28d8",
      "name": "Aggregate7"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"title\": \"title\",\n  \"src1\": \"link\",\n  \"src2\": \"link\",\n  \"src3\": \"link\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        160,
        672
      ],
      "id": "c4e99cd7-e2cc-4fb4-a674-8f216e1b06e5",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=- H√¨nh ·∫£nh: {{ $json.allValidImages[0] }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=- B·∫°n l√† 1 Photographer, h√£y ki·ªÉm tr·∫£ t·∫•t c·∫£ h√¨nh ·∫£nh:  \n+ - Ch·ªçn ra 3 b·ª©c ·∫£nh b·∫Øt ƒë·∫ßu b·∫±ng https:// v√† c√≥ ƒëu√¥i nh∆∞ .png, .jpg, .jpeg, .gif‚Ä¶ ph√π h·ª£p v·ªõi ti√™u ƒë·ªÅ : {{ $('HTTP Request5').item.json.query }} nh·∫•t \n+ b·ªè qua nh·ªØng url Source image is unreachable"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.9,
      "position": [
        -32,
        448
      ],
      "id": "3f99d51b-4b0e-41b4-a59b-b20564fdea98",
      "name": "·∫¢nh2"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\nconst urls = item.json[\"·∫¢nh\"].split('\\n');\n\nreturn urls.map(url => ({\njson: {\n\"·∫¢nh\": url.trim()\n}\n}));\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2064,
        -32
      ],
      "id": "f381a5cf-3cc6-4389-8b0a-de7ff4263f2a",
      "name": "Code8"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "·∫¢nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2240,
        -32
      ],
      "id": "c7ec7556-116f-413e-bad7-5001889370aa",
      "name": "Aggregate8"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -96,
        672
      ],
      "id": "79b758b1-2fee-4611-be8e-dfa41cf804dc",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "HcvkLZcRcuANBdLH",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1904,
        224
      ],
      "id": "670aa38a-5ff4-45df-89db-5b2983b7ea53",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://queue.fal.run/fal-ai/flux-kontext-lora",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "image_url",
              "value": "={{ $json.image_url }}"
            },
            {
              "name": "prompt",
              "value": "Recreate the entire image as a brand new scene, keeping the people in the same positions and poses, but redesign all surrounding objects, surfaces, and environment so that it looks like a luxurious indoor spa with warm lighting, natural wood tones, and decorative plants. Remove all graphic overlays, banners, or unrelated objects. Maintain a clean, realistic, and professional style"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1088,
        528
      ],
      "id": "1e569295-2f2f-4533-a6ac-f1a0b236189f",
      "name": "x√≥a logo",
      "credentials": {
        "httpHeaderAuth": {
          "id": "L8U4FBNA2wOBmr32",
          "name": "fal"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.status_url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1296,
        528
      ],
      "id": "bc0bc136-eec7-42b8-ae9d-b5151e66aae8",
      "name": "ki·ªÉm tra tr·∫°ng th√°i",
      "credentials": {
        "httpHeaderAuth": {
          "id": "L8U4FBNA2wOBmr32",
          "name": "fal"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "bd688f71-db2a-4abf-806c-dded03c26a8d",
              "leftValue": "={{ $json.status }}",
              "rightValue": "COMPLETED",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1712,
        528
      ],
      "id": "0a0b6224-28df-443e-9d01-6eb5addd5e3f",
      "name": "If1"
    },
    {
      "parameters": {
        "url": "={{ $json.response_url }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1952,
        560
      ],
      "id": "f9ee71a6-229a-4a1a-8429-79852cb1ecf4",
      "name": "Get image",
      "credentials": {
        "httpHeaderAuth": {
          "id": "L8U4FBNA2wOBmr32",
          "name": "fal"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        784,
        448
      ],
      "id": "798b1d46-77fa-4cf2-833d-92ebbe064e73",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "fieldToSplitOut": "image_url",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        512,
        448
      ],
      "id": "89508e90-11b7-4e7a-84f1-4fd63663f50b",
      "name": "Split Out"
    },
    {
      "parameters": {
        "jsCode": "return [\n  {\n    json: {\n      image_url: [\n        $json.output.src1,\n        $json.output.src2,\n        $json.output.src3\n      ]\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        320,
        448
      ],
      "id": "466f7497-18ae-4723-9301-25cfaac3b788",
      "name": "Code"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "images"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1072,
        352
      ],
      "id": "59ff5f3b-01d8-4473-bc09-ec23c8cef794",
      "name": "Aggregate1"
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=Bot ƒë√£ t·∫°o b√†i vi·∫øt ch·ªß ƒë·ªÅ: {{ $('l·∫•y n·ªôi dung2').item.json['ch·ªß ƒë·ªÅ'] }} \n{{ $('l·∫•y n·ªôi dung2').item.json['ng√†y t·∫°o'] }}\n\n{{ $('l·∫•y n·ªôi dung2').item.json['N·ªôi dung'] }}\n\n·∫¢nh 1: {{ $json['·∫¢nh'][0] }}\n\n·∫¢nh 2: {{ $json['·∫¢nh'][1] }}\n\n·∫¢nh 3: {{ $json['·∫¢nh'][2] }}\n\na1: ƒêƒÉng b√†i v·ªõi ·∫£nh 1\na2: ƒêƒÉng b√†i v·ªõi ·∫£nh 2\na3: ƒêƒÉng b√†i v·ªõi ·∫£nh 3\nall: ƒêƒÉng b√†i v·ªõi c·∫£ 3 ·∫£nh\nk: b·ªè qua ch·ªß ƒë·ªÅ hi·ªán t·∫°i",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        2448,
        -32
      ],
      "id": "b7c1af23-3f65-4336-b9c9-2367871024d5",
      "name": "Zalo Send Message",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {
        "amount": 10
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1504,
        528
      ],
      "id": "84c98b0d-d207-48fa-9352-b83228932951",
      "name": "Wait1",
      "webhookId": "f5ca5999-280b-4abc-a9af-97504f0ccb1b"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1328,
        1744
      ],
      "id": "03fc51cc-ec2d-4119-bf1d-4c773b1ec975",
      "name": "l·∫•y n·ªôi dung7",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const validItems = items.filter(i => i.json[\"ng√†y t·∫°o\"]);\nif (validItems.length === 0) {\n  return [];\n}\n\nconst newestItem = validItems.reduce((latest, current) => {\n  const latestTime = new Date(latest.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  const currentTime = new Date(current.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  return currentTime > latestTime ? current : latest;\n});\n\nreturn [newestItem];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -912,
        1744
      ],
      "id": "91220909-b621-4374-93cb-c7cbf746e5f9",
      "name": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t7"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $json.id }}",
            "tr·∫°ng th√°i": "b·ªè qua"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -704,
        1744
      ],
      "id": "62a005db-8ece-4dc1-93da-7ce4f8f533c5",
      "name": "c·∫≠p nh·∫≠t duy·ªát b√†i10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1152,
        1744
      ],
      "id": "42b9858b-b8e2-44da-9b97-b6c4b6974977",
      "name": "If9"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "photos",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t19').item.json['N·ªôi dung'] }}"
              },
              {
                "name": "url",
                "value": "={{ $json['·∫¢nh'][0] }}"
              }
            ]
          }
        }
      },
      "id": "4fc39bc4-f0e3-43f0-bdd4-dda7aa80f263",
      "name": "ƒêƒÉng L√™n Facebook8",
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        -256,
        1216
      ],
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1328,
        1216
      ],
      "id": "4edba598-93a5-4505-b288-3713d8d72c01",
      "name": "l·∫•y n·ªôi dung19",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const validItems = items.filter(i => i.json[\"ng√†y t·∫°o\"]);\nif (validItems.length === 0) {\n  return [];\n}\n\nconst newestItem = validItems.reduce((latest, current) => {\n  const latestTime = new Date(latest.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  const currentTime = new Date(current.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  return currentTime > latestTime ? current : latest;\n});\n\nreturn [newestItem];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -912,
        1216
      ],
      "id": "f99edd7b-2047-446a-8bf4-2863ff7fbeec",
      "name": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t19"
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "=posts",
        "options": {}
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        0,
        1216
      ],
      "id": "9aeeac51-cdbe-46ae-8474-ac1089549bac",
      "name": "Facebook Graph API8",
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const post = items[0].json.data[0];\n\n// Ph√¢n t√≠ch ID ƒë·ªÉ t·∫°o link d·∫°ng: https://www.facebook.com/{pageId}/posts/{postIdShort}\nconst [pageId, postIdShort] = post.id.split(\"_\");\n\n// Chuy·ªÉn v·ªÅ ƒë·ªëi t∆∞·ª£ng Date v√† c·ªông th√™m 7 ti·∫øng ƒë·ªÉ th√†nh gi·ªù VN\nconst createdAtUTC = new Date(post.created_time);\nconst vietnamTime = new Date(createdAtUTC.getTime() + 7 * 60 * 60 * 1000);\n\n// Format l·∫°i th√†nh \"YYYY-MM-DD HH:mm\"\nconst pad = n => n.toString().padStart(2, '0');\nconst formattedDate = `${vietnamTime.getFullYear()}-${pad(vietnamTime.getMonth() + 1)}-${pad(vietnamTime.getDate())} ${pad(vietnamTime.getHours())}:${pad(vietnamTime.getMinutes())}`;\n\n// Tr·∫£ v·ªÅ k·∫øt qu·∫£\nreturn [\n  {\n    json: {\n      message: post.message,\n      created_time_vietnam: formattedDate,\n      original_time_utc: post.created_time,\n      post_url: `https://facebook.com/${post.id}`,\n      post_link: `https://www.facebook.com/${pageId}/posts/${postIdShort}`\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        224,
        1216
      ],
      "id": "121e3e5a-f622-431f-9d88-386e518b032d",
      "name": "Code14"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "tr·∫°ng th√°i": "ƒë√£ ƒëƒÉng",
            "ch·ªß ƒë·ªÅ": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t19').item.json['ch·ªß ƒë·ªÅ'] }}",
            "ng√†y ƒëƒÉng": "={{ $json.created_time_vietnam }}",
            "Link b√†i vi·∫øt": "={{ $json.post_link }}"
          },
          "matchingColumns": [
            "ch·ªß ƒë·ªÅ"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        464,
        1216
      ],
      "id": "bb7d5089-b151-42f6-86a0-304f67cf7a7c",
      "name": "c·∫≠p nh·∫≠t tr·∫°ng th√°i8",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1152,
        1216
      ],
      "id": "c694a322-120f-46ef-8a56-3967cfd12da7",
      "name": "If22"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "561faec0-ba6d-4d51-b29b-10bf0fd97b60",
                    "leftValue": "={{ $json.message.data.content }}",
                    "rightValue": "a1",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "·∫£nh 1"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8b5b6a1c-e612-44d4-94ac-029fa85e4dec",
                    "leftValue": "={{ $json.message.data.content }}",
                    "rightValue": "a2",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "·∫£nh 2"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "44fa839e-5d51-4601-8a6a-4e24451c4204",
                    "leftValue": "={{ $json.message.data.content }}",
                    "rightValue": "a3",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "·∫£nh 3"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "85fc099a-0314-4372-bf25-28377775121d",
                    "leftValue": "={{ $json.message.data.content }}",
                    "rightValue": "k",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "h·ªßy"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "bd3fb38b-8164-4667-8ec9-8cdee8fcaa67",
                    "leftValue": "={{ $json.message.data.content }}",
                    "rightValue": "all",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Nhi·ªÅu ·∫£nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -1584,
        1504
      ],
      "id": "db6e98b9-6878-4bb5-85f4-a202bfa05581",
      "name": "Switch3"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\nconst urls = item.json[\"·∫¢nh\"].split('\\n');\n\nreturn urls.map(url => ({\njson: {\n\"·∫¢nh\": url.trim()\n}\n}));\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -704,
        1216
      ],
      "id": "f6bd6071-587d-464d-91f8-52bd8157ddf3",
      "name": "Code15"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "photos",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t21').item.json['N·ªôi dung'] }}"
              },
              {
                "name": "url",
                "value": "={{ $json['·∫¢nh'][1] }}"
              }
            ]
          }
        }
      },
      "id": "9f97cf92-834a-482f-9e5a-00c4088535ef",
      "name": "ƒêƒÉng L√™n Facebook9",
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        -256,
        1392
      ],
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1328,
        1392
      ],
      "id": "b24d9127-230c-4a13-a1ec-48f300544c93",
      "name": "l·∫•y n·ªôi dung21",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const validItems = items.filter(i => i.json[\"ng√†y t·∫°o\"]);\nif (validItems.length === 0) {\n  return [];\n}\n\nconst newestItem = validItems.reduce((latest, current) => {\n  const latestTime = new Date(latest.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  const currentTime = new Date(current.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  return currentTime > latestTime ? current : latest;\n});\n\nreturn [newestItem];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -912,
        1392
      ],
      "id": "ecfff8b3-6cf1-4e34-ae2e-c3c04fc2ef56",
      "name": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t21"
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "=posts",
        "options": {}
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        0,
        1392
      ],
      "id": "96858c66-3054-4640-91ce-be48ed5ec597",
      "name": "Facebook Graph API9",
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const post = items[0].json.data[0];\n\n// Ph√¢n t√≠ch ID ƒë·ªÉ t·∫°o link d·∫°ng: https://www.facebook.com/{pageId}/posts/{postIdShort}\nconst [pageId, postIdShort] = post.id.split(\"_\");\n\n// Chuy·ªÉn v·ªÅ ƒë·ªëi t∆∞·ª£ng Date v√† c·ªông th√™m 7 ti·∫øng ƒë·ªÉ th√†nh gi·ªù VN\nconst createdAtUTC = new Date(post.created_time);\nconst vietnamTime = new Date(createdAtUTC.getTime() + 7 * 60 * 60 * 1000);\n\n// Format l·∫°i th√†nh \"YYYY-MM-DD HH:mm\"\nconst pad = n => n.toString().padStart(2, '0');\nconst formattedDate = `${vietnamTime.getFullYear()}-${pad(vietnamTime.getMonth() + 1)}-${pad(vietnamTime.getDate())} ${pad(vietnamTime.getHours())}:${pad(vietnamTime.getMinutes())}`;\n\n// Tr·∫£ v·ªÅ k·∫øt qu·∫£\nreturn [\n  {\n    json: {\n      message: post.message,\n      created_time_vietnam: formattedDate,\n      original_time_utc: post.created_time,\n      post_url: `https://facebook.com/${post.id}`,\n      post_link: `https://www.facebook.com/${pageId}/posts/${postIdShort}`\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        224,
        1392
      ],
      "id": "ec7ae05f-ae5d-4bc1-8fa5-ce3a4d8a744a",
      "name": "Code16"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "tr·∫°ng th√°i": "ƒë√£ ƒëƒÉng",
            "ch·ªß ƒë·ªÅ": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t21').item.json['ch·ªß ƒë·ªÅ'] }}",
            "ng√†y ƒëƒÉng": "={{ $json.created_time_vietnam }}",
            "Link b√†i vi·∫øt": "={{ $json.post_link }}"
          },
          "matchingColumns": [
            "ch·ªß ƒë·ªÅ"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        464,
        1392
      ],
      "id": "8279dfdf-16dc-4adb-9c60-abb34bcaf075",
      "name": "c·∫≠p nh·∫≠t tr·∫°ng th√°i9",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1152,
        1392
      ],
      "id": "200da6ea-539a-4173-a640-3ead2568b6ff",
      "name": "If24"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\nconst urls = item.json[\"·∫¢nh\"].split('\\n');\n\nreturn urls.map(url => ({\njson: {\n\"·∫¢nh\": url.trim()\n}\n}));\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -704,
        1392
      ],
      "id": "5e208599-474b-4be1-9cc5-f4095b1f4362",
      "name": "Code17"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "photos",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t23').item.json['N·ªôi dung'] }}"
              },
              {
                "name": "url",
                "value": "={{ $json['·∫¢nh'][2] }}"
              }
            ]
          }
        }
      },
      "id": "4049d0cc-05e9-4443-9f27-47d0a007b334",
      "name": "ƒêƒÉng L√™n Facebook10",
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        -256,
        1568
      ],
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1328,
        1568
      ],
      "id": "23db2a1e-b5a6-4c71-881a-4ee9791ca7d8",
      "name": "l·∫•y n·ªôi dung23",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const validItems = items.filter(i => i.json[\"ng√†y t·∫°o\"]);\nif (validItems.length === 0) {\n  return [];\n}\n\nconst newestItem = validItems.reduce((latest, current) => {\n  const latestTime = new Date(latest.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  const currentTime = new Date(current.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  return currentTime > latestTime ? current : latest;\n});\n\nreturn [newestItem];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -912,
        1568
      ],
      "id": "74070f7c-e7e4-4c33-b509-5c4c29e0c1b4",
      "name": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t23"
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "=posts",
        "options": {}
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        0,
        1568
      ],
      "id": "ae15ae2c-cb11-40ba-8df0-41690b8013c4",
      "name": "Facebook Graph API10",
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const post = items[0].json.data[0];\n\n// Ph√¢n t√≠ch ID ƒë·ªÉ t·∫°o link d·∫°ng: https://www.facebook.com/{pageId}/posts/{postIdShort}\nconst [pageId, postIdShort] = post.id.split(\"_\");\n\n// Chuy·ªÉn v·ªÅ ƒë·ªëi t∆∞·ª£ng Date v√† c·ªông th√™m 7 ti·∫øng ƒë·ªÉ th√†nh gi·ªù VN\nconst createdAtUTC = new Date(post.created_time);\nconst vietnamTime = new Date(createdAtUTC.getTime() + 7 * 60 * 60 * 1000);\n\n// Format l·∫°i th√†nh \"YYYY-MM-DD HH:mm\"\nconst pad = n => n.toString().padStart(2, '0');\nconst formattedDate = `${vietnamTime.getFullYear()}-${pad(vietnamTime.getMonth() + 1)}-${pad(vietnamTime.getDate())} ${pad(vietnamTime.getHours())}:${pad(vietnamTime.getMinutes())}`;\n\n// Tr·∫£ v·ªÅ k·∫øt qu·∫£\nreturn [\n  {\n    json: {\n      message: post.message,\n      created_time_vietnam: formattedDate,\n      original_time_utc: post.created_time,\n      post_url: `https://facebook.com/${post.id}`,\n      post_link: `https://www.facebook.com/${pageId}/posts/${postIdShort}`\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        224,
        1568
      ],
      "id": "20f5d612-7b60-4cbf-8c97-80fc97c019e6",
      "name": "Code18"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "tr·∫°ng th√°i": "ƒë√£ ƒëƒÉng",
            "ch·ªß ƒë·ªÅ": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t23').item.json['ch·ªß ƒë·ªÅ'] }}",
            "ng√†y ƒëƒÉng": "={{ $json.created_time_vietnam }}",
            "Link b√†i vi·∫øt": "={{ $json.post_link }}"
          },
          "matchingColumns": [
            "ch·ªß ƒë·ªÅ"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        464,
        1568
      ],
      "id": "5c9ee165-6edf-4969-82e2-c045c64687d7",
      "name": "c·∫≠p nh·∫≠t tr·∫°ng th√°i10",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1152,
        1568
      ],
      "id": "1236c0b4-1fea-4e76-975d-6931c6ede690",
      "name": "If26"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\nconst urls = item.json[\"·∫¢nh\"].split('\\n');\n\nreturn urls.map(url => ({\njson: {\n\"·∫¢nh\": url.trim()\n}\n}));\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -704,
        1568
      ],
      "id": "3ab7b72c-a896-4d20-9b10-7a4f16812345",
      "name": "Code19"
    },
    {
      "parameters": {
        "jsCode": "return items.flatMap(item => {\n  const urls = item.json[\"·∫¢nh\"].split('\\n');\n\n  return urls.map(url => ({\n    json: {\n      \"·∫¢nh\": url.trim()\n    }\n  }));\n});\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -704,
        1952
      ],
      "id": "46256a54-475e-4b16-87ce-7df29a2384af",
      "name": "T√°ch link ·∫£nh th√†nh item"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "photos",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "=·∫¢nh {{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25').item.json['ch·ªß ƒë·ªÅ'] }}"
              },
              {
                "name": "published",
                "value": "false"
              },
              {
                "name": "url",
                "value": "={{ $json['·∫¢nh'] }}"
              }
            ]
          }
        }
      },
      "id": "a898ca0f-f9f5-42bd-9bd2-b869cc196575",
      "name": "ƒêƒÉng L√™n Facebook1",
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        -480,
        1952
      ],
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4fc852c5-6379-4935-9f25-6f156d58f2c1",
              "name": "data",
              "value": "={\"media_fbid\":\"{{ $json.id }}\"}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -256,
        1952
      ],
      "id": "4257bbd3-047d-4454-9577-b5c6414bab88",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "data"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        0,
        1952
      ],
      "id": "82eca9fc-65d5-48cc-aef2-d300e7bdf4b1",
      "name": "Aggregate9"
    },
    {
      "parameters": {
        "httpRequestMethod": "POST",
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "feed",
        "options": {
          "queryParameters": {
            "parameter": [
              {
                "name": "message",
                "value": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25').item.json['N·ªôi dung'] }}"
              },
              {
                "name": "attached_media",
                "value": "={{ JSON.stringify($json.data) }}"
              }
            ]
          }
        }
      },
      "id": "e82a3e59-36bd-4180-96ad-c0acf76c5fd2",
      "name": "ƒêƒÉng L√™n Facebook2",
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        224,
        1952
      ],
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        -1328,
        1952
      ],
      "id": "7bc4e029-3be2-4b4e-9cb3-3f68419fceee",
      "name": "l·∫•y n·ªôi dung25",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const validItems = items.filter(i => i.json[\"ng√†y t·∫°o\"]);\nif (validItems.length === 0) {\n  return [];\n}\n\nconst newestItem = validItems.reduce((latest, current) => {\n  const latestTime = new Date(latest.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  const currentTime = new Date(current.json[\"ng√†y t·∫°o\"].replace(' ', 'T'));\n  return currentTime > latestTime ? current : latest;\n});\n\nreturn [newestItem];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -912,
        1952
      ],
      "id": "1d19a93d-8478-4878-851c-b78f80b4ac7f",
      "name": "L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7423bdcc-459b-4207-9e24-bf4ac4f83078",
              "leftValue": "={{ $json['tr·∫°ng th√°i'] }}",
              "rightValue": "ƒê√£ ƒëƒÉng",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1152,
        1952
      ],
      "id": "44628d71-354a-4be5-95fc-21c21f91c198",
      "name": "If28"
    },
    {
      "parameters": {
        "graphApiVersion": "v22.0",
        "node": "me",
        "edge": "=posts",
        "options": {}
      },
      "type": "n8n-nodes-base.facebookGraphApi",
      "typeVersion": 1,
      "position": [
        464,
        1952
      ],
      "id": "4da02050-f3d4-486d-8224-c3c8474b447d",
      "name": "Facebook Graph API11",
      "credentials": {
        "facebookGraphApi": {
          "id": "pE0SxUuzJGBXmOnc",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const post = items[0].json.data[0];\n\n// Ph√¢n t√≠ch ID ƒë·ªÉ t·∫°o link d·∫°ng: https://www.facebook.com/{pageId}/posts/{postIdShort}\nconst [pageId, postIdShort] = post.id.split(\"_\");\n\n// Chuy·ªÉn v·ªÅ ƒë·ªëi t∆∞·ª£ng Date v√† c·ªông th√™m 7 ti·∫øng ƒë·ªÉ th√†nh gi·ªù VN\nconst createdAtUTC = new Date(post.created_time);\nconst vietnamTime = new Date(createdAtUTC.getTime() + 7 * 60 * 60 * 1000);\n\n// Format l·∫°i th√†nh \"YYYY-MM-DD HH:mm\"\nconst pad = n => n.toString().padStart(2, '0');\nconst formattedDate = `${vietnamTime.getFullYear()}-${pad(vietnamTime.getMonth() + 1)}-${pad(vietnamTime.getDate())} ${pad(vietnamTime.getHours())}:${pad(vietnamTime.getMinutes())}`;\n\n// Tr·∫£ v·ªÅ k·∫øt qu·∫£\nreturn [\n  {\n    json: {\n      message: post.message,\n      created_time_vietnam: formattedDate,\n      original_time_utc: post.created_time,\n      post_url: `https://facebook.com/${post.id}`,\n      post_link: `https://www.facebook.com/${pageId}/posts/${postIdShort}`\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        720,
        1952
      ],
      "id": "88146939-49bf-4ae2-aadf-d2bdf4b971b0",
      "name": "Code20"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4",
          "mode": "list",
          "cachedResultName": "spacalla",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1y3AndbJ3rvqdvusx9EvrvsbSUE4FTJiVxCas0m3WHc4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "tr·∫°ng th√°i": "ƒë√£ ƒëƒÉng",
            "ch·ªß ƒë·ªÅ": "={{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t25').item.json['ch·ªß ƒë·ªÅ'] }}",
            "ng√†y ƒëƒÉng": "={{ $json.created_time_vietnam }}",
            "Link b√†i vi·∫øt": "={{ $json.post_link }}"
          },
          "matchingColumns": [
            "ch·ªß ƒë·ªÅ"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ch·ªß ƒë·ªÅ",
              "displayName": "ch·ªß ƒë·ªÅ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ng√†y t·∫°o",
              "displayName": "ng√†y t·∫°o",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "tr·∫°ng th√°i",
              "displayName": "tr·∫°ng th√°i",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ng√†y ƒëƒÉng",
              "displayName": "ng√†y ƒëƒÉng",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Link b√†i vi·∫øt",
              "displayName": "Link b√†i vi·∫øt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "N·ªôi dung",
              "displayName": "N·ªôi dung",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "·∫¢nh",
              "displayName": "·∫¢nh",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.5,
      "position": [
        976,
        1952
      ],
      "id": "e44de00d-cc40-4966-8733-8438ce01e24b",
      "name": "c·∫≠p nh·∫≠t tr·∫°ng th√°i11",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e4XIghkwNhZEV5WX",
          "name": "thang"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "·∫¢nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -480,
        1216
      ],
      "id": "d6c946f3-06a0-4f70-9abd-5fbdbf3a479a",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "·∫¢nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -480,
        1392
      ],
      "id": "b1f11659-f53b-4674-84d5-583862628b8b",
      "name": "Aggregate10"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "·∫¢nh"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -480,
        1568
      ],
      "id": "6d9cb17d-8602-4656-9b1a-2d20e8353faa",
      "name": "Aggregate11"
    },
    {
      "parameters": {
        "content": "## X√°c nh·∫≠n duy·ªát b√†i fb",
        "height": 1020,
        "width": 2980,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1600,
        1104
      ],
      "typeVersion": 1,
      "id": "03654160-4dea-44bb-bfa1-9e160e02c253",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=ƒêƒÉ ƒëƒÉng b√†i vi·∫øt th√†nh c√¥ng v√†o l√∫c {{ $json['ng√†y ƒëƒÉng'] }}\nLink b√†i vi·∫øt: {{ $json['Link b√†i vi·∫øt'] }}",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        720,
        1216
      ],
      "id": "31802dfc-198c-4534-9646-4bbd67a4870f",
      "name": "Zalo Send Message3",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=ƒêƒÉ ƒëƒÉng b√†i vi·∫øt th√†nh c√¥ng v√†o l√∫c {{ $json['ng√†y ƒëƒÉng'] }}\nLink b√†i vi·∫øt: {{ $json['Link b√†i vi·∫øt'] }}",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        720,
        1392
      ],
      "id": "50f9d1ed-3866-4602-af93-7b0e13dbb64a",
      "name": "Zalo Send Message4",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=ƒêƒÉ ƒëƒÉng b√†i vi·∫øt th√†nh c√¥ng v√†o l√∫c {{ $json['ng√†y ƒëƒÉng'] }}\nLink b√†i vi·∫øt: {{ $json['Link b√†i vi·∫øt'] }}",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        720,
        1568
      ],
      "id": "ae169466-1359-436a-8bc9-d7a777c47a35",
      "name": "Zalo Send Message5",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=ƒê√£ b·ªè qua ch·ªß ƒë·ªÅ: {{ $('L·∫•y b√†i vi·∫øt m·ªõi nh·∫•t7').item.json['ch·ªß ƒë·ªÅ'] }}",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        -480,
        1744
      ],
      "id": "2b1d31d8-486d-4582-8c8f-ceaf232cdd2c",
      "name": "Zalo Send Message6",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {
        "threadId": "5536028982519892683",
        "message": "=ƒêƒÉ ƒëƒÉng b√†i vi·∫øt th√†nh c√¥ng v√†o l√∫c {{ $json['ng√†y ƒëƒÉng'] }}\nLink b√†i vi·∫øt: {{ $json['Link b√†i vi·∫øt'] }}",
        "quote": {},
        "mentions": {}
      },
      "type": "n8n-nodes-zalo-tools.zaloSendMessage",
      "typeVersion": 4,
      "position": [
        1200,
        1952
      ],
      "id": "b98d5016-c5cf-470a-9644-3be82bee6f49",
      "name": "Zalo Send Message7",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-zalo-tools.zaloMessageTrigger",
      "typeVersion": 1,
      "position": [
        -1824,
        1552
      ],
      "id": "e18d4a15-07f4-4454-b5a4-27b7b12beb4e",
      "name": "Zalo Message Trigger",
      "webhookId": "01c2b234-41ea-4ad4-bebf-066b45b6ba1a",
      "credentials": {
        "zaloApi": {
          "id": "Q9ZDuWnqr1DHtDUl",
          "name": "Zalo API Sora"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Research top 5 t√¨m ki·∫øm theo ch·ªß d·ªÅ\n",
        "height": 368,
        "width": 1056
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1952,
        80
      ],
      "typeVersion": 1,
      "id": "5aaab871-86b1-4464-9cec-cb9ca306700e",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## T·ªïng h·ª£p n·ªôi dung v√† vi·∫øt b√†i hoan ch·ªânh",
        "height": 608,
        "width": 1552,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -640,
        -400
      ],
      "typeVersion": 1,
      "id": "7ea8bc6d-76d1-456f-bae0-86c3c9bdf040",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Ki·ªÉm tra v√† ch·ªçn ·∫£nh",
        "height": 496,
        "width": 928,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -656,
        336
      ],
      "typeVersion": 1,
      "id": "ca1db592-354e-4900-b22d-cd3bc8f038ca",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## X√≥a logo ƒë·ªìng b·ªô b·ªëi c·∫£nh c·ªßa ·∫£nh",
        "height": 512,
        "width": 1328
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        752,
        272
      ],
      "typeVersion": 1,
      "id": "b4503622-54ac-4e6d-b209-100946060400",
      "name": "Sticky Note4"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-08-10T09:46:56.922Z",
  "versionId": "1e49973c-898e-41e5-82b3-7e9d364d14fb"
}